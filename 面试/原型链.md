## prototype

首先要清楚一个概念,每个构造函数,也就是每个函数都有一个`prototype`属性,通过向`prototype`添加属性,用这个构造函数创建出来的对象会继承这个属性,

```js
function Person() {

}
// 虽然写在注释里，但是你要注意：
// prototype是函数才会有的属性
Person.prototype.name = 'Kevin';
var person1 = new Person();
var person2 = new Person();
console.log(person1.name) // Kevin
console.log(person2.name) // Kevin
```

其实，函数的 prototype 属性指向了一个对象，这个对象正是调用该构造函数而创建的**实例**的原型，也就是这个例子中的 person1 和 person2 的原型。

那什么是原型呢？你可以这样理解：每一个JavaScript对象(null除外)在创建的时候就会与之关联另一个对象，这个对象就是我们所说的原型，每一个对象都会从原型"继承"属性。

![构造函数和实例原型的关系图](https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype1.png)



## \_proto_

这是每一个JavaScript对象(除了 null )都具有的一个属性，叫__proto__，这个属性会指向该对象的原型。

```js
function Person() {

}
var person = new Person();
console.log(person.__proto__ === Person.prototype); // true
```



![原型链示意图](https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype5.png)

图中由相互关联的原型组成的链状结构就是原型链，也就是蓝色的这条线。

![img](https://pic3.zhimg.com/50/e83bca5f1d1e6bf359d1f75727968c11_hd.jpg?source=1940ef5c)





```js
Object.prototype.__proto__ === null //true
```

```js
object instanceof constructor
//相当于
object.__proto__ === constructor.prototype
```

`instanceof`操作符就是把实例的**隐性原型**跟构造函数的**显性原型**相比较返回布尔值





### [4 个用于拓展原型链的方法](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain#总结：4_个用于拓展原型链的方法)

* new-initialization
* Object.create
* Object.setPrototypeOf
* __proto__





```js
function Foo() {
    this.value = 42;
}
Foo.prototype = {
    method: function() {}
};

function Bar() {}

// 设置Bar的prototype属性为Foo的实例对象
Bar.prototype = new Foo();
Bar.prototype.foo = 'Hello World';

// 修正Bar.prototype.constructor为Bar本身
Bar.prototype.constructor = Bar;

var test = new Bar() // 创建Bar的一个新实例

// 原型链
test [Bar的实例]
    Bar.prototype [Foo的实例] 
        { foo: 'Hello World' }
        Foo.prototype
            {method: ...};
            Object.prototype
                {toString: ... /* etc. */};
```



![image-20210525143659800](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210525143659800.png)

![image-20210525143721120](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210525143721120.png)
